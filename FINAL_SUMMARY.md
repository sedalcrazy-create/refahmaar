# ๐ ุฎูุงุตู ููุง - ฺุงูุด ูุงุฑ ูุฏุง

## โ ููู ฺุฒ ุขูุงุฏู ุงุณุช!

ูพุฑูฺู **ฺฉุงููุงู** ุขูุงุฏู deploy ู ุงุณุชูุงุฏู ุงุณุช.

## ๐ ุชุบุฑุงุช ุฌุฏุฏ (ุจุฑุงุณุงุณ ุฏุฑุฎูุงุณุช ุดูุง)

### 1. ุฑุจุงุช ุจูู ฺฉุงูู ุจุง ุซุจุชโูุงู โ

**ูุจู:** ุซุจุชโูุงู ุฏุฑ ููโุงูพ
**ุจุนุฏ:** ุซุจุชโูุงู ุฏุฑ ุฑุจุงุช ุจูู

**ุฌุฑุงู ุฌุฏุฏ:**
```
ฺฉุงุฑุจุฑ โ @refahsnakebot
    โ
/start
    โ
ุซุจุชโูุงู (ูุงูุ ูุงู ุฎุงููุงุฏฺฏุ ฺฉุฏ ุงุณุชุฎุฏุงู)
    โ
ุฏฺฉูู "ุดุฑูุน ุจุงุฒ"
    โ
ูุฑูุฏ ุจู ููโุงูพ ู ุจุงุฒ
```

### 2. Leaderboard ุฎูุฏฺฉุงุฑ ูุฑ 30 ุฏููู โ

- ูุฑ 30 ุฏููู ฺฉุจุงุฑุ ุฑุจุงุช ูุณุช 10 ููุฑ ุจุฑุชุฑ ุฑุง ุฏุฑ ฺฉุงูุงู ููุชุดุฑ ูโฺฉูุฏ
- ุดุงูู ูุงูุ ุงูุชุงุฒ ู ุฏฺฉูู ูุฑูุฏ ุจู ุจุงุฒ

### 3. ุฏฺฉููโูุง ุฑุจุงุช โ

ุจุนุฏ ุงุฒ ุซุจุชโูุงูุ ฺฉุงุฑุจุฑ ุฏุณุชุฑุณ ุจู ุงู ุฏฺฉููโูุง ุฏุงุฑุฏ:
- ๐ฎ ุดุฑูุน ุจุงุฒ
- ๐ ุฑุชุจูโุจูุฏ (10 ููุฑ ุจุฑุชุฑ)
- ๐ ุขูุงุฑ ูู (ุงูุชุงุฒุ ุฑุชุจูุ ุชุนุฏุงุฏ ุจุงุฒ)
- โ ุฑุงูููุง

## ๐ฆ ูุงูโูุง ุฌุฏุฏ

### ุฑุจุงุช ุจูู:
- โ `bot/bot.py` - ุฑุจุงุช ฺฉุงูู ุจุง ุซุจุชโูุงู ู scheduler
- โ `bot/requirements.txt` - Dependencies Python
- โ `bot/Dockerfile` - Docker image ุจุฑุง ุฑุจุงุช
- โ `BOT_GUIDE.md` - ุฑุงูููุง ฺฉุงูู ุฑุจุงุช

### API Endpoints ุฌุฏุฏ:
- โ `GET /api/user/:baleUserId` - ุจุฑุฑุณ ฺฉุงุฑุจุฑ
- โ `POST /api/register` - ุซุจุชโูุงู ฺฉุงุฑุจุฑ
- โ `GET /api/leaderboard/top/:limit` - ุฑุชุจูโุจูุฏ
- โ `GET /api/user/:baleUserId/stats` - ุขูุงุฑ ฺฉุงุฑุจุฑ

### ุชูุธูุงุช:
- โ `docker-compose.yml` - service ุฌุฏุฏ ุจุฑุง ุฑุจุงุช
- โ `.env` - ูุชุบุฑูุง ุฑุจุงุช (ุชูฺฉูุ ฺฉุงูุงู)

## ๐ ุฏุณุชูุฑุงูุนูู Deploy

### ุณุงุฏูโุชุฑู ุฑูุด (ุชูุตู ูโุดูุฏ):

```bash
# 1. ุงุชุตุงู ุจู ุณุฑูุฑ
ssh root@37.152.174.87

# 2. ุขูพููุฏ ูุงูโูุง ุจู /opt/yalda-snake

# 3. ูุฑุงุด .env
nano /opt/yalda-snake/.env
# ุชูุธู CHANNEL_ID ุจู ุขุฏุฑุณ ฺฉุงูุงู ุดูุง

# 4. ุชูุธู Nginx
cp /opt/yalda-snake/nginx-snake-darmanjoo.conf /etc/nginx/sites-available/snake.darmanjoo.ir
ln -s /etc/nginx/sites-available/snake.darmanjoo.ir /etc/nginx/sites-enabled/
nginx -t
systemctl reload nginx

# 5. ุงุฌุฑุง
cd /opt/yalda-snake
docker-compose up -d --build

# 6. ุจุฑุฑุณ
docker-compose ps
docker-compose logs -f bot
```

## ๐ ฺฺฉโูุณุช Deploy

### ูุจู ุงุฒ ูุงูฺ:

- [ ] ูุงูโูุง ุฑู ุณุฑูุฑ ฺฉูพ ุดุฏู
- [ ] `.env` ูุฑุงุด ุดุฏู (ุฎุตูุตุงู `CHANNEL_ID`)
- [ ] Nginx ุชูุธู ู reload ุดุฏู
- [ ] SSL ูุนุงู ุงุณุช (certbot)
- [ ] Docker containers ุงุฌุฑุง ุดุฏูโุงูุฏ:
  - [ ] yalda_snake_db (PostgreSQL)
  - [ ] yalda_snake_app (Game Server)
  - [ ] yalda_snake_bot (Bale Bot)

### ุชุณุช ุฑุจุงุช:

- [ ] ุจู @refahsnakebot ุจุฑูุฏ
- [ ] `/start` ุฑุง ุจุฒูุฏ
- [ ] ูุฑุงูุฏ ุซุจุชโูุงู ุฑุง ฺฉุงูู ฺฉูุฏ
- [ ] ุฏฺฉููโูุง ฺฉุงุฑ ูโฺฉููุฏ
- [ ] "ุดุฑูุน ุจุงุฒ" ุจุงุฒ ุฑุง ุจุงุฒ ูโฺฉูุฏ
- [ ] "ุฑุชุจูโุจูุฏ" ูุณุช ุฑุง ููุงุด ูโุฏูุฏ
- [ ] "ุขูุงุฑ ูู" ุขูุงุฑ ุฑุง ููุงุด ูโุฏูุฏ

### ุชุณุช ุจุงุฒ:

- [ ] https://snake.darmanjoo.ir ุจุงุฒ ูโุดูุฏ
- [ ] Canvas ู ุจุงุฒ ููุฏ ูโุดูุฏ
- [ ] ฺฉูุชุฑูโูุง ฺฉุงุฑ ูโฺฉููุฏ
- [ ] WebSocket ูุชุตู ูโุดูุฏ
- [ ] ุงูุชุงุฒูุง ุฐุฎุฑู ูโุดููุฏ

### ุชุณุช Leaderboard ุฎูุฏฺฉุงุฑ:

- [ ] ุฑุจุงุช admin ฺฉุงูุงู ุงุณุช
- [ ] ุจุนุฏ ุงุฒ 30 ุฏูููุ ูพุงู leaderboard ุงุฑุณุงู ูโุดูุฏ
- [ ] ุง ุชุณุช ุฏุณุช: `docker exec -it yalda_snake_bot python -c "from bot import post_leaderboard_to_channel; post_leaderboard_to_channel()"`

## ๐ฏ ูุนูุงุฑ ููุง

```
โโโโโโโโโโโโโโโโโโโ
โ  Bale Users     โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โ
โโโโโโโโโโโโโโโโโโโ
โ  @refahsnakebot โ  โ ุชูฺฉู: 64658763:rgYSwBxd...
โ                 โ
โ  1. ุซุจุชโูุงู     โ
โ  2. ููู ุงุตู   โ
โ  3. ุขูุงุฑ        โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โ
โโโโโโโโโโโโโโโโโโโ
โ   Game Server   โ  โ https://snake.darmanjoo.ir
โ   (Node.js)     โ
โ                 โ
โ  - API Routes   โ
โ  - Socket.io    โ
โ  - Game Logic   โ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โ
โโโโโโโโโโโโโโโโโโโ
โ   PostgreSQL    โ
โ                 โ
โ  - users        โ
โ  - leaderboard  โ
โ  - high_scores  โ
โโโโโโโโโโโโโโโโโโโ

     ูุฑ 30 ุฏููู
         โ
โโโโโโโโโโโโโโโโโโโ
โ     Channel     โ  โ CHANNEL_ID ุฏุฑ .env
โ                 โ
โ  Leaderboard    โ
โ  Top 10 Players โ
โโโโโโโโโโโโโโโโโโโ
```

## ๐ ุขูุงุฑ ุชุฎูู

- **ฺฉุงุฑุจุฑุงู ููุฒูุงู:** 100-150 ููุฑ
- **ุณุฑูุฑ:** 4GB RAM / 4 Core CPU (ฺฉุงู ุงุณุช)
- **ูุถุง ุฏุณฺฉ:** ~2GB (ุดุงูู Docker images)
- **ูพููุง ุจุงูุฏ:** ฺฉู (WebSocket ุจุณุงุฑ ฺฉุงุฑุขูุฏ ุงุณุช)

## ๐ง ุฏุณุชูุฑุงุช ููุฏ

### ูุงูุชูุฑูฺฏ

```bash
# ูุงฺฏ ููู ุณุฑูุณโูุง
docker-compose logs -f

# ููุท ุฑุจุงุช
docker-compose logs -f bot

# ููุท ุจุงุฒ
docker-compose logs -f app

# ูุถุนุช containers
docker-compose ps

# ูุตุฑู ููุงุจุน
docker stats
```

### ูุฏุฑุช

```bash
# ุฑโุงุณุชุงุฑุช ููู
docker-compose restart

# ุฑโุงุณุชุงุฑุช ููุท ุฑุจุงุช
docker-compose restart bot

# ุชููู
docker-compose down

# ุดุฑูุน ูุฌุฏุฏ
docker-compose up -d
```

### ุฏุชุงุจุณ

```bash
# ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงู
docker exec yalda_snake_db psql -U snake_user -d yalda_snake -c "SELECT COUNT(*) FROM users;"

# ุจุฑุชุฑูโูุง
docker exec yalda_snake_db psql -U snake_user -d yalda_snake -c "SELECT * FROM high_scores LIMIT 10;"

# ุขุฎุฑู ุซุจุชโูุงูโูุง
docker exec yalda_snake_db psql -U snake_user -d yalda_snake -c "SELECT first_name, last_name, created_at FROM users ORDER BY created_at DESC LIMIT 10;"
```

## ๐ ูุณุชูุฏุงุช ฺฉุงูู

1. **START_HERE.md** - ุดุฑูุน ุงูุฌุง (ุฎูุงุตู ุณุฑุน)
2. **DEPLOYMENT_GUIDE.md** - ุฑุงูููุง deploy ูุฑุญูู ุจู ูุฑุญูู
3. **BOT_GUIDE.md** - ุฑุงูููุง ฺฉุงูู ุฑุจุงุช
4. **BALE_SETUP.md** - ุชูุธูุงุช ุจูู
5. **README.md** - ุชูุถุญุงุช ฺฉู ูพุฑูฺู
6. **CLAUDE.md** - ุฑุงูููุง ุชูุณุนู ุจุฑุง Claude

## ๐ ูุชุฌู

### ููู ฺุฒ ฺฉุงูู ุงุณุช:

โ **Backend:** Node.js + Express + Socket.io + PostgreSQL
โ **Frontend:** HTML5 Canvas + Responsive Design
โ **Bot:** Python + Bale SDK + Auto Leaderboard
โ **Infrastructure:** Docker + Nginx + SSL
โ **Domain:** snake.darmanjoo.ir
โ **Bot:** @refahsnakebot

### ุขูุงุฏู ุจุฑุง:

โ ุซุจุชโูุงู ฺฉุงุฑุจุฑุงู
โ ุจุงุฒ Multiplayer ุจุง 100-150 ููุฑ
โ ุฐุฎุฑู ุงูุชุงุฒุงุช
โ Leaderboard ูุญุธูโุง
โ ุงุฑุณุงู ุฎูุฏฺฉุงุฑ ุฑุชุจูโุจูุฏ ูุฑ 30 ุฏููู

### ฺฉุงู ุงุณุช:

1. ูุงูโูุง ุฑุง ุฑู ุณุฑูุฑ ฺฉูพ ฺฉูุฏ
2. `.env` ุฑุง ุชูุธู ฺฉูุฏ (ููุท `CHANNEL_ID`)
3. `docker-compose up -d --build` ุฑุง ุงุฌุฑุง ฺฉูุฏ
4. ูุฐุช ุจุจุฑุฏ! ๐ฎ

---

## ๐ ูุงุฒ ุจู ฺฉูฺฉุ

### ูุดฺฉู ุฏุงุฑุ

1. ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉู: `docker-compose logs -f`
2. ูุงูโูุง ุฑุงูููุง ุฑุง ูุทุงูุนู ฺฉู
3. ุฏุณุชูุฑุงุช ุนุจโุงุจ ุฑุง ุงูุชุญุงู ฺฉู

### ููู ฺุฒ ฺฉุงุฑ ูโฺฉูุฏุ

๐ **ุนุงู! ุขูุงุฏูโุงุฏ ุจุฑุง ูุณุงุจูู ูุฏุง!**

- ุชุงุฑุฎ: ฺฉุดูุจู ณฐ ุขุฐุฑ ฑดฐณ
- ุฒูุงู: ุตุจุญ ุชุง ุขุฎุฑ ุดุจ
- URL: https://snake.darmanjoo.ir
- Bot: @refahsnakebot

---

**ูุฏุง ูุจุงุฑฺฉ! ๐๐๐**

**ูููู ุจุงุดุฏ! ๐**
