<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ú†Ø§Ù„Ø´ Ù…Ø§Ø± ÛŒÙ„Ø¯Ø§ÛŒÛŒ - Ø§Ø¯Ø§Ø±Ù‡ Ú©Ù„ Ø±ÙØ§Ù‡ Ùˆ Ø¯Ø±Ù…Ø§Ù†</title>

    <!-- Bale Mini App SDK -->
    <script src="https://tapi.bale.ai/miniapp.js?3"></script>

    <!-- Fonts -->
    <style>
        @font-face {
            font-family: 'BYekan';
            src: url('fonts/BYekan/BYekan+.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'BYekan';
            src: url('fonts/BYekan/BYekan+ Bold.ttf') format('truetype');
            font-weight: bold;
            font-style: normal;
            font-display: swap;
        }

        * {
            font-family: 'BYekan', Tahoma, Arial, sans-serif !important;
        }
    </style>

    <!-- Styles -->
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen active">
        <!-- Yalda Background -->
        <div class="yalda-background">
            <!-- Snowfall Container -->
            <div class="snowfall"></div>

            <!-- Decorative Shapes -->
            <div class="decorative-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
            </div>
        </div>

        <!-- Login Container -->
        <div class="login-container">
            <!-- Animated Logo -->
            <div class="logo-container">
                <div class="logo-glow-outer"></div>
                <div class="logo-wrapper">
                    <div class="logo-glow"></div>
                    <img src="assets/logo-bmi.png" alt="Ù„ÙˆÚ¯Ùˆ Ø¨Ø§Ù†Ú© Ù…Ù„ÛŒ" class="logo-img">
                </div>
                <div class="loading-ring"></div>
                <!-- Rotating Rings -->
                <div class="logo-rotating-ring ring-1"></div>
                <div class="logo-rotating-ring ring-2"></div>
            </div>

            <!-- Title -->
            <div class="login-header">
                <h1 class="login-title">ğŸ® Ú†Ø§Ù„Ø´ Ù…Ø§Ø± ÛŒÙ„Ø¯Ø§ÛŒÛŒ</h1>
                <p class="login-subtitle">Ø´Ø¨ ÛŒÙ„Ø¯Ø§ÛŒ Ø®Ø¬Ø³ØªÙ‡ Ù…Ø¨Ø§Ø±Ú©</p>
                <div class="tagline-box">
                    <span class="tagline-text">Ø§Ø¯Ø§Ø±Ù‡ Ú©Ù„ Ø±ÙØ§Ù‡ Ùˆ Ø¯Ø±Ù…Ø§Ù†</span>
                </div>
            </div>

            <!-- Login Form -->
            <div class="login-form-wrapper">
                <form id="login-form" class="login-form">
                    <div class="form-group">
                        <div class="input-icon">ğŸ‘¤</div>
                        <input type="text" id="first-name" required placeholder="Ù†Ø§Ù…" class="form-input">
                    </div>

                    <div class="form-group">
                        <div class="input-icon">ğŸ‘¤</div>
                        <input type="text" id="last-name" required placeholder="Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ" class="form-input">
                    </div>

                    <div class="form-group">
                        <div class="input-icon">ğŸ”¢</div>
                        <input type="text" id="employee-code" required placeholder="Ú©Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…ÛŒ" class="form-input">
                    </div>

                    <button type="submit" class="btn-login">
                        <span class="btn-text">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¨Ø§Ø²ÛŒ</span>
                        <span class="btn-icon">ğŸ¯</span>
                    </button>
                </form>

                <div id="error-message" class="error-message"></div>
            </div>

            <!-- Footer -->
            <div class="login-footer">
                <p class="footer-text">âœ¨ Ø¯Ø± Ø´Ø¨ ÛŒÙ„Ø¯Ø§ØŒ Ø¨Ø§ Ø¨Ø§Ø²ÛŒ Ù…Ø§Ø± Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§Ø´ÛŒØ¯ âœ¨</p>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen hidden">
        <div class="game-header">
            <div class="player-info">
                <span id="player-name"></span>
                <span id="player-score">Ø§Ù…ØªÛŒØ§Ø²: 0</span>
            </div>
            <button id="show-leaderboard" class="btn-leaderboard">ğŸ† Ø¨Ø±ØªØ±ÛŒÙ†â€ŒÙ‡Ø§</button>
        </div>

        <div class="game-container">
            <canvas id="game-canvas"></canvas>
        </div>

        <div class="game-controls">
            <div class="control-row">
                <button class="control-btn" data-key="38">â†‘</button>
            </div>
            <div class="control-row">
                <button class="control-btn" data-key="37">â†</button>
                <button class="control-btn" data-key="40">â†“</button>
                <button class="control-btn" data-key="39">â†’</button>
            </div>
        </div>

        <div class="game-info">
            <p>ğŸ Ø³ÛŒØ¨ = 10 Ø§Ù…ØªÛŒØ§Ø² | ğŸ‰ Ù‡Ù†Ø¯ÙˆØ§Ù†Ù‡ = 20 Ø§Ù…ØªÛŒØ§Ø² | ğŸ‡ Ø§Ù†Ø§Ø± = 30 Ø§Ù…ØªÛŒØ§Ø²</p>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="leaderboard-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ† Ø¨Ø±ØªØ±ÛŒÙ† Ø¨Ø§Ø²ÛŒÚ©Ù†Ø§Ù†</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div id="leaderboard-list"></div>
        </div>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading hidden">
        <div class="spinner"></div>
        <p>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</p>
    </div>

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/main.js"></script>

    <!-- Snowfall Script -->
    <script>
        // Create snowflakes
        function createSnowflakes() {
            const snowfall = document.querySelector('.snowfall');
            if (!snowfall) return;

            const snowflakeCount = 50;

            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.innerHTML = 'â„';
                snowflake.style.left = Math.random() * 100 + '%';
                snowflake.style.animationDuration = (Math.random() * 3 + 2) + 's';
                snowflake.style.animationDelay = Math.random() * 5 + 's';
                snowflake.style.fontSize = (Math.random() * 10 + 10) + 'px';
                snowflake.style.opacity = Math.random() * 0.6 + 0.4;
                snowfall.appendChild(snowflake);
            }
        }

        // Initialize snowfall when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', createSnowflakes);
        } else {
            createSnowflakes();
        }
    </script>
</body>
</html>
